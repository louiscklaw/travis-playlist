# https://docs.travis-ci.com/user/conditional-builds-stages-jobs/
# https://docs.travis-ci.com/user/conditions-v1
stages:
  - name: Build_docker

  - name: test_helloworld_tryout
    if: branch =~ /.*helloworld-tryout.*/

  - name: Unit_test
    if: branch =~ /.*feature.*/

  - name: Test
    if: branch =~ /.*develop.*/

  - name: Build
    if: branch =~ /.*develop.*/

  - name: Deploy
    if: branch =~ /.*master.*/

  - name: Integration_to_other_repo
    if: branch = develop

  - name: Test_publish_dashboard
    if: branch = develop

  - name: Publish
    if: branch = master

  # cron job on master branch publish dashboard
  - name: Publish_dashboard
    if: branch = master


  - name: Test_cron

  - name: Merge
    if: branch NOT IN (master)

  - name: Cron
    if: type = cron

  - name: Test_publish_dashboard
    if: branch =~ /.*build-dashboard.*/

  - name: test_travis-failed-rebuild
    if: branch =~ /.*travis-failed-rebuild.*/
