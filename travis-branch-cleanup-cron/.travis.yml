# https://docs.travis-ci.com/user/docker/
# https://docs.travis-ci.com/user/environment-variables/
# https://docs.travis-ci.com/user/job-lifecycle/

# You can import up to 25 other configs in total.
os: linux
language: python

jobs:
  include:
    - stage: Unit_test
      name: travis-branch-cleanup-cron
      script:
        - sudo apt update
        - sudo apt install -y python3 python3-pip python3-dev python3-wheel python3-setuptools
        - pip3 install --user pipenv
        - cd travis-branch-cleanup-cron && ./test.sh && cd -

    - stage: Test
      name: travis-branch-cleanup-cron
      script:
        - sudo apt update
        - sudo apt install -y python3 python3-pip python3-dev python3-wheel python3-setuptools
        - pip3 install --user pipenv
        - cd travis-branch-cleanup-cron
        - pipenv sync
        - pipenv run python3 clean_remote_branch.py louiscklaw/hko-weather-slackbot.git
        - cd -
