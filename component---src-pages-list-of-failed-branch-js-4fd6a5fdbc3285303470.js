(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/na4":function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return p}));n("pJf4"),n("q8oJ"),n("YbXK"),n("cFtU"),n("rzGZ"),n("m210"),n("4DPX");var r=n("o0o1"),a=n.n(r);n("ls82"),n("6kNP"),n("8npG"),n("sC2a"),n("HQhv");function c(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){i(c,r,a,o,u,"next",e)}function u(e){i(c,r,a,o,u,"throw",e)}o(void 0)}))}}var s="https://api.travis-ci.com/owner/louiscklaw/repos";function l(){return fetch("https://raw.githubusercontent.com/louiscklaw/travis-playlist/db/branch_fail_statistics.json")}function f(){return fetch("https://raw.githubusercontent.com/louiscklaw/travis-playlist/db/build_failed_list.json")}function m(e,t){return fetch(e,{headers:{"Travis-API-Version":3,Authorization:t,"Content-Type":"application/xml"}})}function p(e){try{var t=e.split("/")}catch(n){throw console.error("findme",e),n}return t[4]+"/"+t[5]}function h(e){return m(s,e)}function d(e,t){return m(e,t).then((function(e){return e.json()}))}function v(e,t){return b.apply(this,arguments)}function b(){return(b=u(a.a.mark((function e(t,n){var r,o,i,u,l,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],o=!0,100,i=s;case 4:if(!o){e.next=16;break}return e.next=7,d(i,t);case 7:if(u=e.sent,l=u["@pagination"],void 0!==u["@type"]&&"error"==u["@type"]&&(alert("error found on fetching result"),alert(t),o=!1),void 0===l?o=!1:(o=l.next,f=l.next?l.next["@href"]:null,i="https://api.travis-ci.com"+f,r=[].concat(c(r),c(u.repositories))),1!=n){e.next=14;break}return console.log("fetch_one_page_only is on"),e.abrupt("break",16);case 14:e.next=4;break;case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return"https://api.travis-ci.com/repo/github/"+function(e){try{return e.replace("/","%2F")}catch(t){throw console.log(e),t}}(e)+"/branches"}function g(e,t){return d(y(e),t).then((function(e){return t=e.branches.map((function(e){return e.last_build})),n=t.filter((function(e){return"failed"==e.state})),t.filter((function(e){return"passed"!=e.state})),console.log("findme last_build",t),n;var t,n})).then((function(t){return t.map((function(t){return n=e,r=t["@href"],"https://travis-ci.com/github/"+n+r.replace("build","builds");var n,r}))}))}},"7tjn":function(e,t,n){"use strict";n("HQhv");var r=n("q1tI"),a=n.n(r);n("Wbzz");t.a=function(e){var t=e.repo_name,n=e.content;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"card"},a.a.createElement("header",{className:"card-header"},a.a.createElement("p",{className:"card-header-title"},a.a.createElement("a",{href:"http://www.github.com/"+t,className:"button is-white is-small",target:"_blank"},a.a.createElement("i",{class:"fab fa-github-square fa-2x"}),t.split("/")[1]))),a.a.createElement("div",{className:"card-content"},a.a.createElement("div",{className:"content"},a.a.createElement("div",{className:"tags"},n.map((function(e){return a.a.createElement("span",{class:"tag is-danger"},a.a.createElement("a",{href:e,style:{color:"white",padding:"3px;"},target:"_blank"},a.a.createElement("i",{class:"fas fa-times"}),function(e){try{return e.split("/")[7]}catch(t){throw console.log("at build_failed_card.js",e),t}}(e)))}))))),a.a.createElement("footer",{className:"card-footer"})))}},AtJN:function(e,t,n){"use strict";n.r(t);n("cxuS"),n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi");var r=n("q1tI"),a=n.n(r),c=n("Bl7J"),o=n("vrFN"),i=n("RMg3"),u=n("7tjn");var s=function(e){var t=e.num_fails,n=e.num_repos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",{className:"title is-3"},"list of failed branches"),a.a.createElement("h2",{className:"subtitle is-6"},"(number of repos: ",n,", number of fails ",t,")"))},l=n("/na4"),f=n("+NQN");n("jfjL");t.default=function(e){var t=a.a.useState([]),n=t[0],r=t[1],m=a.a.useState([]),p=m[0],h=m[1],d=a.a.useState(0),v=d[0],b=d[1],y=a.a.useState(1),g=y[0],E=y[1],w=a.a.useState(),N=(w[0],w[1]),j=a.a.useContext(f.b).travis_token;return a.a.useEffect((function(){Object(l.c)().then((function(e){return e.json()})).then((function(e){var t,n;r(e),h(function(e,t){var n=0,r=e.length,a=[];for(n=0;n<r;n+=t){var c=e.slice(n,n+t);a.push(c)}return a}(Object.keys(e),6)),b(Object.keys(e).length),E((t=e,n={},Object.keys(t).forEach((function(e){return n[e]=t[e].length})),Object.values(n).reduce((function(e,t){return e+t}))))}))}),[]),a.a.useEffect((function(){void 0!==j&&Object(l.f)(j).then((function(e){return e.json()})).then((function(e){return N(e)}))}),[j]),a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{title:"travis dashboard"}),a.a.createElement(i.a,null),a.a.createElement("section",{className:"section"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"columns is-desktop"},a.a.createElement("div",{className:"column"},a.a.createElement(s,{num_fails:g,num_repos:v}))))),p.map((function(e){return a.a.createElement("div",{className:"columns is-desktop"},e.map((function(e){return a.a.createElement("div",{className:"column"},a.a.createElement(u.a,{repo_name:e,content:n[e]}))})))}))))}},cxuS:function(e,t,n){var r=n("P8UN"),a=n("ys0W")(!1);r(r.S,"Object",{values:function(e){return a(e)}})},ys0W:function(e,t,n){var r=n("QPJK"),a=n("2mBY"),c=n("5SQf"),o=n("BnbX").f;e.exports=function(e){return function(t){for(var n,i=c(t),u=a(i),s=u.length,l=0,f=[];s>l;)n=u[l++],r&&!o.call(i,n)||f.push(e?[n,i[n]]:i[n]);return f}}}}]);
//# sourceMappingURL=component---src-pages-list-of-failed-branch-js-4fd6a5fdbc3285303470.js.map